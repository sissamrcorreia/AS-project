{% extends 'base.html' %}

{% block content %}
    <h3>Products Page</h3>

    <!-- TODO: how the product look like -->
    {% if products %}
        {% for product in products %}
            <p>{{ product.name }}</p>
        {% endfor %}
    {% else %}
        <p>No products available.</p>
    {% endif %}

    {% if user.is_authenticated %}
        {% for group in user.groups.all %}
            {% if group.name == 'Seller' %}
                {% if not create_mode and not edit_mode %}
                    <a href="{% url 'create_product' %}" class="btn btn-success">Create New Product</a>
                {% endif %}
                {% if create_mode %}
                    <h4>Create New Product</h4>
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        {{ form.as_p }}
                        <button type="submit" class="btn btn-primary">Save Product</button>
                        <a href="{% url 'product_list' %}" class="btn btn-secondary">Cancel</a>
                    </form>
                {% endif %}
            {% endif %}
        {% endfor %}
    {% endif %}
{% endblock %}